# PasarGuard Admin Report ðŸ“Š

Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ÛŒÚ© Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ **PasarGuard / Marzban Panel** Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ **Ø±ÙˆØ²Ø§Ù†Ù‡ / Ù‡ÙØªÚ¯ÛŒ / Ù…Ø§Ù‡Ø§Ù†Ù‡** Ø±Ø§ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

âœ… Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ: **Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¶Ø±Ø± Ù…Ø§Ù„ÛŒ**  
âœ… Ú†ÙˆÙ† Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø¬Ù…ØŒ Ø±ÛŒØ³Øª Ù…ØµØ±ÙØŒ Ø³Ø§Ø®Øª Ø§Ú©Ø§Ù†Øª Ø¬Ø¯ÛŒØ¯ Ùˆ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø­Ø¬Ù…ØŒ Ø¯Ø± Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

---

## âœ¨ Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø§ØµÙ„ÛŒ

### âœ… Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ (Daily)
Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø§Ø¯Ù…ÛŒÙ† Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯:

- Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ (`INSERT`) â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ø§Ù…Ù„ Ø­Ø¬Ù… Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡
- Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø¬Ù… Ú©Ø§Ø±Ø¨Ø± (`CHANGE_LIMIT`) â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙÙ‚Ø· Ø§Ø®ØªÙ„Ø§Ù Ø­Ø¬Ù… Ø¬Ø¯ÛŒØ¯ Ùˆ Ù‚Ø¨Ù„ÛŒ
- Ø±ÛŒØ³Øª Ù…ØµØ±Ù (`RESET_USAGE`) â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¬Ù… Ú©Ø§Ù…Ù„ Ù¾Ù„Ù† (Ú†ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø­Ø¬Ù… Ú©Ø§Ù…Ù„ Ú¯Ø±ÙØªÙ‡)
- Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø­Ø¬Ù… (`Unlimited`) â†’ Ù†Ù…Ø§ÛŒØ´ Ø¨Ù‡â€ŒØµÙˆØ±Øª `unlimited`

---

### âœ… Ú¯Ø²Ø§Ø±Ø´ Ù‡ÙØªÚ¯ÛŒ (Weekly)
- Ø¨Ø§Ø²Ù‡: **Ø´Ù†Ø¨Ù‡ ØªØ§ Ø¬Ù…Ø¹Ù‡**
- Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§ Ø¯Ø± ÛŒÚ© Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø¹Ù„Ø§ÙˆÙ‡ Ø¨Ø± Ø­Ø¬Ù…ØŒ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† `unlimited` Ùˆ Ù„ÛŒØ³Øª Ø¢Ù†â€ŒÙ‡Ø§ Ù†ÛŒØ² Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

### âœ… Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù‡Ø§Ù†Ù‡ (Monthly)
- Ø¨Ø§Ø²Ù‡: **Ù…Ø§Ù‡ Ø´Ù…Ø³ÛŒ Ù‚Ø¨Ù„ÛŒ**
- ÙÙ‚Ø· Ø¯Ø± Ø±ÙˆØ² Ø§ÙˆÙ„ Ù‡Ø± Ù…Ø§Ù‡ Ø´Ù…Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø­Ø¬Ù… Ú©Ù„ÛŒ Ù‡Ø± Ø§Ø¯Ù…ÛŒÙ† + `unlimited`Ù‡Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## âœ… Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ (Ø¶Ø¯ Ø¶Ø±Ø± Ù…Ø§Ù„ÛŒ)

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙ†Ù‡Ø§ Ø§Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒ Ù¾ÙˆÙ„ÛŒ Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

| Action Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ | Ù…Ø¹Ù†ÛŒ | Ù…Ø­Ø§Ø³Ø¨Ù‡ |
|------------------|------|--------|
| INSERT | Ø³Ø§Ø®Øª Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ | Ú©Ù„ `data_limit_new` |
| CHANGE_LIMIT | Ø§ÙØ²Ø§ÛŒØ´/ØªØºÛŒÛŒØ± Ø­Ø¬Ù… | ÙÙ‚Ø· `new - old` Ø§Ú¯Ø± Ù…Ø«Ø¨Øª Ø¨Ø§Ø´Ø¯ |
| RESET_USAGE | Ø±ÛŒØ³Øª Ù…ØµØ±Ù | Ú©Ù„ `data_limit_new` |
| CHANGE_EXPIRE | Ø§ÙØ²Ø§ÛŒØ´ Ø²Ù…Ø§Ù† | ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ `extend` (Ù‡Ø²ÛŒÙ†Ù‡ Ø­Ø¬Ù…ÛŒ Ù†Ø¯Ø§Ø±Ø¯) |
| UPDATE | Ø¢Ù¾Ø¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…ÛŒ | Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ |
| DELETE | Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø± | Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ |

âœ… **Unlimited Ø­Ø¬Ù…ÛŒ** Ø²Ù…Ø§Ù†ÛŒ Ø§Ø³Øª Ú©Ù‡ `data_limit_new == 0` ÛŒØ§ `NULL` Ø¨Ø§Ø´Ø¯.  
âš ï¸ Unlimited Ø²Ù…Ø§Ù†ÛŒ (expire) Ø§Ù‡Ù…ÛŒØªÛŒ Ù†Ø¯Ø§Ø±Ø¯.

---

## ðŸ“Œ Ù†Ù…ÙˆÙ†Ù‡ Ø®Ø±ÙˆØ¬ÛŒ (Example Output)

### âœ… Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡
```text
Daily report - 1404-10-05
Admin: admin58586

- ali: +50.00 GB
- reza2022: unlimited
- m12: +20.00 GB | reset

Total: 70.00 GB

Unlimited users:
reza2022


git clone https://github.com/lastdejavu/pasarguard-admin-report.git
cd pasarguard-admin-report

python3 -m venv .venv
source .venv/bin/activate

pip install -r requirements.txt

cp .env.example .env
nano .env

MYSQL_HOST=127.0.0.1
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASS=YOUR_PASSWORD
MYSQL_DB=pasarguard

TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN
TELEGRAM_CHAT_ID=YOUR_CHAT_ID

TZ=Asia/Tehran

# Daily report (Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª 00:05)
5 0 * * * /usr/bin/python3 /opt/pasarguard/pasarguard_admin_report.py >> /var/log/pasarguard_admin_report.log 2>&1

# Weekly report (Ù‡Ø± Ø´Ù†Ø¨Ù‡ Ø³Ø§Ø¹Øª 00:10)
10 0 * * 6 /usr/bin/python3 /opt/pasarguard/pasarguard_admin_report.py weekly >> /var/log/pasarguard_weekly.log 2>&1

# Monthly report (Ø§ÙˆÙ„ Ù‡Ø± Ù…Ø§Ù‡ Ø´Ù…Ø³ÛŒ Ø³Ø§Ø¹Øª 00:15)
15 0 1 * * /usr/bin/python3 /opt/pasarguard/pasarguard_admin_report.py monthly >> /var/log/pasarguard_monthly.log 2>&1

